#Workflow name
name: Create Github Action to generate a CaH comic

#Trigger workflow when issue is raised
on: 
  issues:
    type:
      - opened


jobs:
  greeting:
    runs-on: ubuntu-latest
    steps: 
    #Ensuring access to repo files
      - name: Checkout Repository
        uses: actions/checkout@v3
        
     #Getting Issue details to get username
      - name: Get Username
        id: issue
        run: echo "::set-output name=username::${{ github.event.issue.user.login }}"
    #Python
      - name: Python set up
        uses: actions/setup-python@v3
        with:
          python-version: '3.x'
      - name: Dependencies
        run: |
          python -m pip install --upgrade pip
      
      #Getting a random number from 100 to 500    
      - name: Generate Random Number
        id: random_number
        run: |
          python - <<EOF
          import random
          num = random.randint(100, 500)
          print(f"::set-output name=num::{num}")
          EOF
    
    
 
          
  
    #Printing comment(have used Create or Update Comment Github 
    #Action on the Marketplace here
      - name: Create comment
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: 1
          body: |
            const body = `
            Hey there ${{ steps.issue.outputs.username }}! 
            Hope you like the comic generated: https://explosm.net/comics/${{ steps.random_number.outputs.num }}
            Thank you for creating this issue, we will look into it.
            `;

            [1]: https://github.com/peter-evans/create-or-update-comment
          reactions: '+1'
          

    
    
    
    
        
    

    
    
    
    
        
    
